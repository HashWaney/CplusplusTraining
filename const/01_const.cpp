//
// Created by hash on 2020/6/18.
//
using namespace std;
// 1ã€‚å®šä¹‰å¸¸é‡
//const int a = 10;

// 2ã€‚ ç±»å‹æ£€æŸ¥

// 3ã€‚ é˜²æ­¢ä¿®æ”¹ï¼Œèµ·ä¿æŠ¤ä½œç”¨ï¼Œå¢åŠ ç¨‹åºå¥å£®æ€§
//void f(const int i) {
//    //Cannot assign to variable 'i' with const-qualified type 'const int
//    i++; // error
//}

// 4ã€‚ å¯ä»¥èŠ‚çœç©ºé—´ï¼Œé¿å…ä¸å¿…è¦çš„å†…å­˜åˆ†é…
// const å®šä¹‰çš„å¸¸é‡ä»æ±‡ç¼–çš„è§’åº¦æ¥çœ‹ï¼Œåªæ˜¯ç»™å‡ºäº†å¯¹åº”çš„å†…å­˜åœ°å€ï¼Œ
// #define ç»™å‡ºçš„æ˜¯ç«‹å³æ•°ï¼Œ
// constå®šä¹‰çš„å¸¸é‡ä¼šåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åªæœ‰ä¸€ä»½æ‹·è´ï¼Œ
// #defineå®šä¹‰çš„å¸¸é‡åœ¨å†…å­˜ä¸­æœ‰è‹¥å¹²ä¸ªæ‹·è´ã€‚

//5ã€‚const å¯¹è±¡é»˜è®¤ æ˜¯æ–‡ä»¶å±€éƒ¨å˜é‡
// éconst å˜é‡é»˜è®¤ä¸ºextern è¦ä½¿å¾—constå˜é‡èƒ½å¤Ÿåœ¨å…¶ä»–æ–‡ä»¶ä¸­è¢«è®¿é—®ï¼Œå¿…é¡»åœ¨æ–‡ä»¶ä¸­æ˜¾ç¤ºçš„æŒ‡å®šä¸ºextern

//6ã€‚å®šä¹‰å¸¸é‡
const int b = 1;
//b =1; // error ä¸èƒ½åœ¨ç»™ä¸€ä¸ªconstä¿®é¥°çš„å˜é‡èµ‹å€¼ã€‚å› ä¸ºè¢«ä¿®é¥°çš„å˜é‡åˆå§‹åŒ–ä¹‹åçš„å€¼ä¸èƒ½åœ¨è¢«ä¿®æ”¹

//const int a,j =0; aä¸ºå¸¸é‡ï¼Œå¿…é¡»è¿›è¡Œåˆå§‹åŒ–

// 7ã€‚æŒ‡é’ˆä¸const

//7.1 ã€‚ æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ
void _07_functestconstpointer() {
// const ä½äº*çš„å·¦ä¾§ï¼Œå°±æ˜¯constç”¨æ¥ä¿®é¥°æŒ‡é’ˆæ‰€æŒ‡å‘çš„å˜é‡
// è¢«constä¿®é¥°çš„åˆæ˜¯å¸¸é‡ï¼Œæ‰€ä»¥æŒ‡é’ˆæŒ‡å‘çš„æ˜¯å¸¸é‡ã€‚å³æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ
    const char *a; // æŒ‡å‘constå¯¹è±¡çš„æŒ‡é’ˆæˆ–è€…è¯´æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ
    char const *j; // ä¹Ÿå°±æ˜¯è¯´è¢«constä¿®é¥°çš„æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸èƒ½éšæ„æ›´æ”¹ã€‚

// constä½äº*çš„å³ä¾§ï¼Œconstä¿®é¥°çš„å˜é‡éœ€è¦åˆå§‹åŒ–ï¼Œ
    const char *const p = nullptr;

    // pointer æ˜¯ä¸€ä¸ªæŒ‡å‘intç±»å‹constå¯¹è±¡çš„æŒ‡é’ˆï¼Œconstå®šä¹‰çš„æ˜¯intç±»å‹ï¼Œ
    // pointeræŒ‡å‘çš„æ˜¯intå¯¹è±¡ç±»å‹ï¼Œè€Œä¸æ˜¯pointeræœ¬èº«ï¼Œæ‰€ä»¥pointerå¯ä»¥ä¸ç”¨èµ‹åˆå§‹åŒ–å€¼ï¼Œä½†æ˜¯ä¸èƒ½é€šè¿‡
    // pointerå»ä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„å€¼
    const int *pointer;
    //*pointer = 10; // æŠ¥é”™
    //pointer = 10; // æŠ¥é”™

    // ä¸constä¿®é¥°ä¸åŒçš„ï¼Œæ˜¯xxæ˜¯ä¸€ä¸ªæ™®é€šçš„intç±»å‹æŒ‡é’ˆï¼ŒæŒ‡é’ˆå¯ä»¥ä¿®æ”¹å˜é‡çš„å€¼ã€‚
    int *xx;
    // æŠŠintç±»å‹æ•°æ®èµ‹å€¼ç»™æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹
    *xx = 3;
    // ä¸èƒ½æŠŠint ç±»å‹æ•°æ®èµ‹å€¼ç»™int*ç±»å‹
    int aa = 4;
    // xx =aa;// æŠ¥é”™
    //å°†aaçš„åœ°å€èµ‹å€¼ç»™int*ç±»å‹
    xx = &aa; // ok

    //ä¹Ÿä¸èƒ½ç”¨void* æŒ‡é’ˆæ¥ä¿å­˜constå¯¹è±¡çš„åœ°å€ï¼Œå¿…é¡»ç”¨const void* ç±»å‹æ¥ä¿å­˜constå¯¹è±¡çš„åœ°å€
    const int pa = 10;
    const void *pa_address = &pa;

//    void * pa_adsdress =&pa; // æŠ¥é”™

    //å°†éconstå¯¹è±¡çš„åœ°å€èµ‹å€¼ç»™constå¯¹è±¡çš„æŒ‡é’ˆ
    const int *ptr;
    int val = 4;
    ptr = &val; //ok

//    *ptr = 3; ä¸èƒ½ä½¿ç”¨constæŒ‡é’ˆæ¥ä¿®æ”¹åŸºç¡€å¯¹è±¡valï¼Œ
    // å¯ä»¥é€šè¿‡æŒ‡å‘éconstå¯¹è±¡çš„æŒ‡é’ˆæ¥ä¿®æ”¹ä»¥è¾¾åˆ°ä¿®æ”¹constæŒ‡é’ˆæŒ‡å‘çš„å˜é‡çš„å€¼
    // æŠŠval çš„åœ°å€èµ‹å€¼ç»™ptr2
    int *ptr2 = &val;
    // ä¿®æ”¹ptr2çš„å€¼ è¾¾åˆ°åŒæ­¥ä¿®æ”¹äº† valçš„å€¼ï¼Œé€šè¿‡valçš„åœ°å€åˆèµ‹å€¼äº†ptrï¼Œå³ptrã€ptr2ã€valçš„å€¼åŒæ­¥ä¿®æ”¹äº†
    *ptr2 = 34;

    // std::cout<<*ptr<<std::endl;

    // æ€»ç»“ï¼š
    // 1ã€‚å¯¹äºæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆï¼Œä¸èƒ½é€šè¿‡æŒ‡é’ˆæ¥ä¿®æ”¹å¯¹è±¡çš„å€¼
    // 2ã€‚ä¸èƒ½ä½¿ç”¨void* æŒ‡é’ˆä¿å­˜constå¯¹è±¡çš„åœ°å€ï¼Œå¿…é¡»ä½¿ç”¨ const void* ç±»å‹çš„æŒ‡é’ˆä¿å­˜
    // 3ã€‚éconstå¯¹è±¡çš„åœ°å€å¯ä»¥èµ‹ç»™æŒ‡å‘constå¯¹è±¡çš„æŒ‡é’ˆ


    // å¸¸æŒ‡é’ˆ
    // 1ã€‚ constæŒ‡é’ˆå¿…é¡»è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸”constæŒ‡é’ˆçš„å€¼ä¸èƒ½ä¿®æ”¹
    int num = 0;
    int *const ptr23 = &num; // constæŒ‡é’ˆå¿…é¡»åˆå§‹åŒ–ï¼Œä¸”constæŒ‡é’ˆçš„å€¼ä¸èƒ½è¢«ä¿®æ”¹
    int *change = &num;
    *change = 3;

    const int oo = 3;
//    int * const ott = &oo;// ä¸èƒ½å°†const int * èµ‹å€¼ç»™ int*
//    const int * ott = & oo;
//    const int * const ott2 =&oo;

    // æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ
    const int ooo = 3;
    const int *const ptt = &ooo;
    //æ•´ç†ä¸€ä¸‹CPPä¸­çš„èµ‹å€¼å’ŒæŒ‡å‘çš„è¯´æ³•ã€‚æ¯”å¦‚oooçš„åœ°å€èµ‹å€¼ç»™äº†pttï¼Œpttå°±æ˜¯æŒ‡å‘äº†oooå¯¹è±¡
    // pttæ˜¯ä¸€ä¸ªconstæŒ‡é’ˆï¼ŒæŒ‡å‘äº†intç±»å‹çš„constå¯¹è±¡


    // å‡½æ•°ä½¿ç”¨const
    // 1ï¼‰ const int
    const int func1(); //è¿”å›å€¼ä¸ºconst int

    // 2ï¼‰const int *
    const int *fun2();//æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸å˜

    // 3ï¼‰int * const
    int *const fun3(); //æŒ‡é’ˆæœ¬èº«ä¸å¯å˜


    // constä¿®é¥°å‡½æ•°å‚æ•°
    //1ï¼‰ä¼ é€’è¿‡æ¥çš„å‚æ•°ä»¥åŠæŒ‡é’ˆæœ¬èº«åœ¨å‡½æ•°å†…ä¸å¯å˜
    void func3(const int var);// ä¼ é€’è¿‡æ¥çš„å‚æ•°ä¸å¯å˜ï¼Œè¡¨æ˜å‚æ•°åœ¨å‡½æ•°ä½“å†…ä¸èƒ½è¢«ä¿®æ”¹ï¼Œvaræœ¬èº«å°±æ˜¯å½¢å‚ï¼Œåœ¨å‡½æ•°ä½“å†…ä¸ä¼šæ”¹å˜ã€‚
    // åŒ…å«ä¼ å…¥çš„å½¢å‚æŒ‡é’ˆä¹Ÿæ˜¯ä¸€æ ·ã€‚è¾“å…¥å‚æ•°é‡‡ç”¨çš„æ˜¯"å€¼ä¼ é€’" ç”±äºå‡½æ•°å°†è‡ªåŠ¨äº§ç”Ÿä¸´æ—¶å˜é‡ç”¨äºå¤åˆ¶è¯¥å‚æ•°ï¼Œè¾“å…¥å‚æ•°ä¸éœ€è¦è¢«ä¿æŠ¤ï¼Œ
    // æ‰€æœ‰ä¸éœ€è¦åŠ constä¿®é¥°
    void func4(int *const var3);//æŒ‡é’ˆæœ¬èº«ä¸å¯å˜ï¼Ÿï¼Ÿï¼Ÿï¼ŸæŒ‡é’ˆæœ¬èº«ä¸å¯å˜ã€‚è¨€å¤–ä¹‹æ„æ˜¯æŒ‡é’ˆçš„åœ°å€ä¸å¯å˜ï¼Œå†…å®¹å¯ä¸å¯å˜å‘¢ï¼Ÿç­”å¯ä»¥ç»è¿‡ä¸Šè¿°åˆ†æï¼Œ
    // é€šè¿‡ä¸€ä¸ªæŒ‡å‘éconstçš„æŒ‡é’ˆæ¥ä¿®æ”¹å†…å®¹ã€‚è¾¾åˆ°æŒ‡é’ˆå¯¹åº”åœ°å€çš„å†…å®¹åŒæ­¥æ”¹å˜

    //2ï¼‰å‚æ•°æŒ‡é’ˆæ‰€æŒ‡çš„å†…å®¹ä¸ºå¸¸é‡ä¸å¯å˜
    void mmcpy(char *dst, const char *src);
    //src ä¸ºè¾“å…¥å‚æ•°ï¼Œdstä¸ºè¾“å‡ºå‚æ•°ï¼Œç»™srcåŠ ä¸Šconstä¿®é¥°åï¼Œå¦‚æœå‡½æ•°ä½“å†…çš„è¯­å¥è¯•å›¾æ”¹åŠ¨srcçš„å†…å®¹ï¼Œç¼–è¯‘å™¨æŠ›å‡ºå¼‚å¸¸

    //3ï¼‰å‚æ•°ä¸ºå¼•ç”¨ï¼Œä¸ºäº†å¢åŠ æ•ˆç‡åŒæ—¶é˜²æ­¢ä¿®æ”¹,å¯¹äºéå†…éƒ¨æ•°æ®ç±»å‹çš„å‚æ•°ï¼ˆä¹Ÿå°±æ˜¯Aä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼‰è€Œè¨€ï¼Œåƒvoid func(A a)è¿™æ ·çš„å£°æ˜çš„å‡½æ•°æ•ˆç‡æ¯”è¾ƒä½ä¸‹ï¼Œ
    // å› ä¸ºå‡½æ•°ä½“å†…å°†äº§ç”ŸAç±»å‹çš„ä¸´æ—¶å¯¹è±¡ç”¨äºå¤åˆ¶å‚æ•°aï¼ˆè¿™å¥è¯ä¹Ÿå°±æ˜¯è¯´åœ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå‡½æ•°ä½“å†…éƒ¨ä¼šæ„é€ ä¸€ä¸ªAç±»å‹çš„ä¸´æ—¶å˜é‡ç„¶åå°†è¿™ä¸ªä¸´æ—¶å˜é‡ç”¨aæ¥æ¥æ”¶ã€‚ï¼‰
    // ä¸´æ—¶å¯¹è±¡çš„æ„é€ ï¼Œå¤åˆ¶ï¼Œææ„è¿‡ç¨‹éƒ½å°†æ¶ˆè€—æ—¶é—´ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¦ä¼ é€’å¼•ç”¨ ï¼Œè€Œä¸æ˜¯ä¼ é€’çš„å€¼çš„åŸå› äº†ï¼Œç±»ä¼¼javaä¸­ä¼ é€’ä¸€ä¸ªjavabeanã€‚
    // ç„¶åæˆ‘ä»¬ä¸å¸Œæœ›è¿™ä¸ªå¼•ç”¨è¢«æ”¹å˜ï¼Œå› æ­¤åŠ ä¸Šconstè¿›è¡Œä¿®é¥°ï¼Œä»£è¡¨è¿™ä¸ªå¼•ç”¨ä¸èƒ½è¢«ä¿®æ”¹
//    void func5(const A &a)
//  æ€è€ƒğŸ¤”ï¼Ÿ æ˜¯å¦åº”è¯¥å°†void fun(int x) æ”¹å†™ä¸ºvoid fun(const int &x)ä»¥ä¾¿æé«˜æ•ˆç‡ï¼Ÿ
// ä¸å¿…è¦ï¼Œå› ä¸ºå†…éƒ¨æ•°æ®ç±»å‹ï¼ˆintï¼Ÿï¼Ÿ double ï¼Ÿï¼Ÿ floatï¼Ÿï¼Ÿï¼Ÿ åŸºæœ¬æ•°æ®ç±»å‹å—ï¼Ÿï¼Ÿï¼Ÿï¼‰ä¸å­˜åœ¨æ„é€ ã€ææ„çš„è¿‡ç¨‹ï¼Œè€Œä¸”å¤åˆ¶ä¹Ÿå¿«ã€‚
// å€¼ä¼ é€’ å’Œ å¼•ç”¨ä¼ é€’æ•ˆç‡å‡ ä¹ç›¸åŒã€‚

// æ€»ç»“ï¼š 1ã€ å¦‚æœå‡½æ•°ä¼ å…¥ä¸€ä¸ªæŒ‡é’ˆï¼Œæ˜¯å¦éœ€è¦ä¸ºæŒ‡é’ˆåŠ ä¸Šconstï¼ŒæŠŠconst åŠ åœ¨æŒ‡é’ˆçš„å‰é¢ ä»£è¡¨å†…å®¹ä¸èƒ½ä¿®æ”¹ã€‚ åŠ è½½æŒ‡é’ˆçš„åé¢ä»£è¡¨æŒ‡é’ˆæœ¬èº«ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆå³åœ°å€ä¸å¯å˜ï¼‰
//       2ã€ å¦‚æœå†™çš„å‡½æ•°éœ€è¦ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªå¤æ‚ç±»å‹çš„å®ä¾‹ï¼ˆå³ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼‰ä¼ å…¥çš„å€¼å‚æ•°ï¼ˆæ•ˆç‡ä¸é«˜ï¼Œåœ¨å‡½æ•°å†…éƒ¨åˆ›å»ºä¸´æ—¶å˜é‡ï¼Œç»å†æ„é€ ï¼Œå¤åˆ¶ï¼Œææ„ç­‰è¿‡ç¨‹ï¼‰
//          å¼•ç”¨å‚æ•°æ•ˆç‡é«˜ï¼ˆè‡³å°‘çœäº†å€¼ä¼ é€’çš„å†…éƒ¨å®ç°çš„ä¸€äº›ç»†èŠ‚ï¼‰ ä¸ºäº†å¼•ç”¨ä¸èƒ½è¢«ä¿®æ”¹ï¼Œéœ€è¦åŠ ä¸Šconst

}

// 8.ç±»ä¸­ä½¿ç”¨cosnt
// åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œä»»ä½•ä¸ä¼šä¿®æ”¹æ•°æ®æˆå‘˜çš„å‡½æ•°éƒ½åº”è¯¥å£°æ˜ä¸ºconstç±»å‹ï¼Œ
// å¦‚æœè¢«constä¿®é¥°çš„å‡½æ•°è°ƒç”¨äº†éconstæˆå‘˜å‡½æ•°ï¼Œç¼–è¯‘å™¨å°†æŠ¥é”™ï¼Œ
// ä½¿ç”¨constä¿®é¥°çš„æˆå‘˜å‡½æ•°è¢«å¸¸æˆå‘˜å‡½æ•°ï¼Œåªæœ‰å¸¸æˆå‘˜å‡½æ•°æ‰æœ‰èµ„æ ¼æ“ä½œå¸¸é‡å’Œå¸¸å¯¹è±¡ï¼Œ
// æ²¡æœ‰ä½¿ç”¨constä¿®é¥°çš„æˆå‘˜å‡½æ•°ä¸èƒ½æ“ä½œå¸¸å¯¹è±¡ï¼Œ

extern  class Apple {
private:
    int pep[100];
public:
    Apple(int i);

    const int pep_num;

    void take(int num) const;

    int add(int num);

    int add(int num) const;

    int getCount() const;
};


#include<iostream>

extern const int const_ext;
extern int ext;

Apple::Apple(int i):pep_num(100) {

}
int Apple::add(int num) {
    take(num); // add è°ƒç”¨äº†constä¿®é¥°çš„takeæ–¹æ³•ï¼Œè¯æ˜äº†éconstå¯¹è±¡å¯è®¿é—®ä»»æ„çš„æˆå‘˜å‡½æ•°ã€‚åŒ…æ‹¬constæˆå‘˜å‡½æ•°ã€‚
}
int Apple::add(int num)const {
    take(num);
}

void Apple::take(int num) const{
    cout<<"take num "<<num <<endl;
}

int Apple::getCount() const{
    take(1);
//    add(1); // getCount ä¸º å¸¸æˆå‘˜å‡½æ•°è°ƒç”¨äº†add éconstä¿®é¥°çš„ã€‚constå¯¹è±¡åªèƒ½è®¿é—®constæˆå‘˜å‡½æ•°
    return pep_num;
}






int main() {
//    std::cout << (ext + 10) << std::endl; // file.cpp ä¸­çš„extçš„å€¼åŠ ä¸Š10
//    std::cout << (const_ext + 10) << std::endl; // file.cpp ä¸­çš„extçš„å€¼åŠ ä¸Š10
    // å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œstd::cout<<bbb<<aaa<<ccc<<....<<std:endl;
    size_t len; // 8ä¸ªå­—èŠ‚

    // int 4ä¸ªå­—èŠ‚ void *
    // double 8ä¸ªå­—èŠ‚
    // float 4ä¸ªå­—èŠ‚
    // char 1ä¸ªå­—èŠ‚
    // short 2ä¸ªå­—èŠ‚
    // byte 1ä¸ªå­—èŠ‚
    // boolean 1ä¸ªå­—èŠ‚
    // long 8ä¸ªå­—èŠ‚
    char a1[] = {'a', 'c', 'd'};
    char a2[] = {'a', 'c', 'd'};
    int result = memcmp(a1, a2, sizeof(a1));
    if (!result) { // ifï¼ˆé0ï¼‰0 ä»£è¡¨false é0 true
        cout << "compare: << " << result << endl;
    } else {
        cout << "compare : =" << result << endl;
    }

    int num = 0;
    int *const ptr23 = &num; // constæŒ‡é’ˆå¿…é¡»åˆå§‹åŒ–ï¼Œä¸”constæŒ‡é’ˆçš„å€¼ä¸èƒ½è¢«ä¿®æ”¹
    int *change = &num;
    *change = 3;
    cout << " ptr23 " << *ptr23 << endl;
    //æœªè¢«constä¿®é¥°çš„å˜é‡ä¸éœ€è¦externä¿®é¥°*æŸ¥çœ‹01_const_extern.cppæ–‡ä»¶ï¼Œ
    // ç„¶è€Œconstå¸¸é‡å°±éœ€è¦è¢«æ˜¾ç¤ºå£°æ˜externï¼Œå¹¶ä¸”éœ€è¦åˆå§‹åŒ–ï¼Œå› ä¸ºå¸¸é‡åœ¨å®šä¹‰åå°±ä¸èƒ½è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥å®šä¹‰æ—¶å¿…é¡»åˆå§‹åŒ–
    std::cout << "éconstä¿®é¥°->" << ext + 10 << " == " << sizeof(len) << " == " << sizeof(ext) << std::endl;
//    memcmp() // æ¯”è¾ƒ
    std::cout << "constä¿®é¥°->" << (const_ext + 10) << std::endl;


    cout<<"-------constä¿®é¥°ç±»-------"<<endl;

    Apple apple(2);
    int count = apple.getCount();
    cout<<"countæ€»æ•°ä¸º "<<count<<endl;

    apple.add(10);

    const Apple b (3);
    b.add(11);
    return 0;

}

